<?php if ($this->list) { ?>
<?php foreach($this->list AS $key => $val) { ?>
<li id="notification_<?php echo $val['notification_id']; ?>"<?php if ($val['read_flag'] == 0) { ?> class="active"<?php } ?>>
	<?php if ($val['read_flag'] == 0) { ?>
		<i class="icon-tips"></i>
		
	<?php } ?>
	<p class="moreContent"><?php echo $val['message']; ?> <span></span></p>
	<?php if ($val['extend_message']) { ?>
	<p class="moreContent collapse"><?php echo implode('</p><p class="moreContent collapse">', $val['extend_message']); ?></p>
	<?php } ?>
	<p class="text-color-999">
		<?php echo date_friendly($val['add_time']); ?>
		<?php if ($val['extend_message']) { ?> 
		<a class="more" href="javascript:;" onclick="$(this).parents('li').find('.moreContent').fadeIn();$(this).hide();"><b class="text-color-999">•</b>&nbsp;&nbsp;<?php _e('展开'); ?></a>
		<?php } ?> 
		<?php if ($val['read_flag'] == 0) { ?>
		<a class="read pull-right" onclick="AWS.Message.read_notification($(this).parents('li'), <?php echo $val['notification_id']; ?>, false);"><?php _e('标为已读');?></a>
		<?php } ?>
	</p>
</li>
<?php } ?>
<input type="hidden" class="ajax_result<?php echo $this->page;?>" value="<?php echo count($this->list);?>">
<input type="hidden" class="per_page" value="<?php echo $this->per_page;?>">
<?php } ?>